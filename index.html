<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Golden Moms â€” Panel (layout vertical tarjetas)</title>
<link rel="icon" href="Logo.webp"/>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<style>
:root{
  --blue:#0f3a78; --lime:#9be22d; --ink:#0f172a; --mut:#64748b;
  --b:#e2e8f0; --bg:#f7f8fa;
  --lime-strong:#7fd410; --blue-strong:#0a2a58;
  --title-size: 12px;
  --content-size: 10px;
  --sub-size: 8px;
  --kpi-number-size: 22px;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
a{color:inherit;text-decoration:none}
.btn{border:1px solid var(--b);border-radius:10px;padding:8px 12px;background:#fff;cursor:pointer;font-size:var(--content-size)}
.btn.p{background:var(--lime);border-color:#a3e635;font-weight:800}
.btn.s{background:#f8fafc}
.top{position:sticky;top:0;z-index:30;background:#fff;border-bottom:1px solid var(--b);display:flex;align-items:center;justify-content:space-between;padding:10px 14px;overflow:visible}
.brand{display:flex;gap:10px;align-items:center}
.brand img{width:32px;height:32px;border-radius:50%;border:2px solid var(--blue)}
.brand div{font-size:var(--content-size)}
.nav{display:flex;gap:8px;flex-wrap:nowrap;align-items:center;overflow-x:auto;padding-bottom:4px;padding-right:16px}
.nav .tab{border:1px solid var(--b);border-radius:999px;padding:8px 12px;background:#fff;cursor:pointer;white-space:nowrap;flex:0 0 auto;font-size:var(--content-size)}
.nav .tab.active{background:var(--blue);color:#fff}
.container{max-width:1200px;margin:14px auto;padding:0 12px}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
.card{background:#fff;border:1px solid var(--b);border-radius:12px;box-shadow:0 8px 20px #0000000a;padding:12px; overflow:visible}
.card h4{margin:0 0 8px;font-size:var(--title-size)}
.kpi h3{margin:0;color:var(--mut);font-size:var(--sub-size)}
.kpi .n{font-size:var(--kpi-number-size);font-weight:800}
.section-note{font-size:var(--sub-size);color:var(--mut);margin-top:8px;border-left:3px solid #e6edf7;padding-left:8px}
.month-bar{display:flex;align-items:center;gap:8px;justify-content:space-between;margin-bottom:10px;flex-wrap:wrap}
.month-title{font-weight:800;font-size:var(--title-size)}
.month-nav{display:flex;gap:6px}
.month-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:10px;grid-auto-rows:minmax(90px,auto)}
.weekdays{display:grid;grid-template-columns:repeat(7,1fr);gap:10px;margin-bottom:8px}
.weekdays div{font-weight:700;color:var(--blue);text-align:center;font-size:var(--content-size)}
.day{min-height:90px;background:#fff;border:1px solid var(--b);border-radius:12px;padding:8px;position:relative;display:flex;flex-direction:column;gap:6px}
.day-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}
.day-n{font-weight:700;color:var(--mut);font-size:var(--content-size)}
.day-add{border:none;background:#eef4ff;color:var(--blue);width:26px;height:26px;border-radius:999px;cursor:pointer;font-size:var(--content-size)}
.ev{border-radius:10px;padding:8px;border:1px solid #0001;cursor:pointer;line-height:1.2;word-break:break-word;font-size:var(--content-size)}
.ev.ev-train{background:var(--lime-strong);color:#0c3200;border-color:#8ed400}
.ev.ev-match{background:#dce9ff;color:var(--blue-strong);border-color:#b9d0ff}

/* ---- AQUI: forzar vertical (stacked) las tarjetas del dashboard */
.cards-dashboard{
  display:flex;
  flex-direction:column;
  gap:12px;
  /* si en algÃºn momento quieres volver a grid, borra estas reglas */
}
.cards-dashboard .card{
  grid-column: 1 / -1 !important; /* fuerza ancho completo */
}

/* reducir tamaÃ±o y peso del texto en birthToday */
#birthToday{
  font-size: var(--content-size);
  color: var(--mut);
  font-weight: 400;
  line-height: 1.3;
  margin-top: 6px;
}

/* mantener 'upBirth' y 'todayEvents' con content size */
#upBirth, #todayEvents, #weekEvents {
  font-size: var(--content-size);
  color: var(--ink);
}

/* Listas y contenido general */
ul { margin: 6px 0 6px 18px; padding:0; font-size:var(--content-size); }
li { margin-bottom:6px; font-size:var(--content-size); line-height:1.2; }

/* Modal y demÃ¡s (mantengo estilo previo) */
.month-list{display:none;flex-direction:column;gap:8px}
.month-list .day{display:flex;flex-direction:row;align-items:flex-start;gap:8px;padding:8px;min-height:auto}
.day-date{min-width:52px;border-radius:8px;background:#f1f5f9;padding:6px 8px;text-align:center;font-weight:700;color:var(--mut);font-size:var(--content-size)}
.events-column{flex:1;display:flex;flex-direction:column;gap:6px}
.modal-bg{position:fixed;inset:0;background:#0006;display:none;z-index:1000;display:flex;justify-content:center;align-items:flex-start;padding-top:6vh;overflow-y:auto;-webkit-overflow-scrolling:touch}
.modal{width: min(860px, calc(100% - 24px));margin: 0 auto;background:#fff;border:1px solid var(--b);border-radius:14px;padding:16px;box-shadow:0 20px 40px #00000022;max-height:90vh; overflow:auto;box-sizing:border-box}
.modal h3{margin:0 0 10px;font-size:var(--title-size)}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:800px){.form-row{grid-template-columns:1fr}}
.input, select, textarea{width:100%;padding:10px;border:1px solid var(--b);border-radius:10px;background:#fff;font-size:var(--content-size)}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
footer{font-size:var(--content-size);color:var(--mut);text-align:center;padding:16px}

/* responsive tweaks (mantengo) */
@media (max-width:900px){
  .grid{grid-template-columns:1fr}
  .month-grid, .weekdays{gap:6px}
  .day{min-height:100px;padding:6px}
  .kpi { padding:12px 10px; }
  .card { padding:12px; }
  .month-bar{flex-wrap:wrap;align-items:center}
}
@media (max-width:420px){
  .month-grid{display:none}
  .weekdays{display:none}
  .month-list{display:flex}
  .month-title{font-size:var(--title-size)}
  .day{padding:8px}
  .day-date{min-width:46px;padding:6px 6px}
  .ev{font-size:var(--content-size);padding:6px}
  .nav .tab{padding:6px 8px;font-size:var(--content-size)}
  .container{padding:0 8px}
  #rosterGrid .card{grid-column:1 / -1 !important}
}
</style>
</head>
<body>

<!-- Top -->
<div class="top">
  <div class="brand">
    <img src="Logo.webp" alt="GM"/>
    <div><strong>Golden</strong> <span style="color:var(--lime);font-weight:800">Moms</span></div>
  </div>
  <div style="display:flex;align-items:center;gap:12px">
    <div class="nav" role="tablist" aria-label="NavegaciÃ³n">
      <button class="tab active" data-view="dash">Dashboard</button>
      <button class="tab" data-view="events">Eventos</button>
      <button class="tab" data-view="roster">Plantel</button>
      <button class="tab" data-view="matches">Partidos</button>
    </div>
  </div>
</div>

<div class="container">

  <!-- DASHBOARD -->
  <section id="v-dash">
    <!-- KPI row: Plantel / Partidos jugados -->
    <div class="grid" style="align-items:stretch">
      <div class="card kpi" style="grid-column:span 6;display:flex;flex-direction:column;justify-content:space-between">
        <div>
          <h3 style="margin-bottom:6px">Plantel</h3>
          <div class="n" id="kRoster">0</div>
          <div style="font-size:var(--sub-size);color:var(--mut)">Integrantes registrados</div>
        </div>
      </div>

      <div class="card kpi" style="grid-column:span 6;display:flex;flex-direction:column;justify-content:space-between">
        <div>
          <h3 style="margin-bottom:6px">Partidos jugados</h3>
          <div class="n" id="kGames">0</div>
          <div id="lastMatchSummary" style="font-size:var(--content-size);color:var(--mut)"></div>
        </div>
        <div style="margin-top:8px;display:flex;justify-content:flex-end">
          <button class="btn s" onclick="showView('matches')">Ir a partidos</button>
        </div>
      </div>
    </div>

    <!-- Row: ahora en vertical -->
    <div class="grid cards-dashboard" style="margin-top:12px;grid-template-columns:repeat(12,1fr);gap:12px">
      <div class="card card-birth-today" style="grid-column:span 4">
        <h4>ðŸŽ‚ CumpleaÃ±os â€” Hoy</h4>
        <div class="section-note">Personas del plantel que cumplen hoy</div>
        <div id="birthToday" style="margin-top:8px">â€”</div>
      </div>

      <div class="card card-birth-next" style="grid-column:span 4">
        <h4>ðŸŽ‰ PrÃ³ximos cumpleaÃ±os</h4>
        <div class="section-note">Lista con los prÃ³ximos 5 cumpleaÃ±os.</div>
        <ul id="upBirth" style="margin:8px 0 0 16px"></ul>
      </div>

      <div class="card card-hoy" style="grid-column:span 4">
        <h4>ðŸ“… Hoy</h4>
        <div class="section-note">Eventos que ocurren hoy (fecha local).</div>
        <ul id="todayEvents" style="margin:8px 0 0 16px"></ul>
      </div>

      <div class="card card-week" style="grid-column:span 12;margin-top:12px">
        <h4>ðŸ“… Eventos de la semana</h4>
        <div class="section-note">Eventos de la semana actual (lunes a domingo).</div>
        <ul id="weekEvents" style="margin:8px 0 0 16px"></ul>
      </div>
    </div>
  </section>

  <!-- resto de vistas... (sin cambios) -->
  <section id="v-events" style="display:none">
    <div class="card">
      <div class="month-bar">
        <div class="month-nav">
          <button class="btn s" id="btnPrevMonth">â—€</button>
          <button class="btn s" id="btnToday">Hoy</button>
          <button class="btn s" id="btnNextMonth">â–¶</button>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <div class="month-title" id="monthTitle">Mes</div>
          <button class="btn p" id="btnNewEventTop">Nuevo Evento</button>
        </div>
      </div>

      <div class="section-note">El calendario muestra eventos agrupados por <strong>fecha local</strong> (YYYY-MM-DD).</div>

      <div class="weekdays">
        <div>Lun</div><div>Mar</div><div>MiÃ©</div><div>Jue</div><div>Vie</div><div>SÃ¡b</div><div>Dom</div>
      </div>

      <div id="monthGrid" class="month-grid"></div>
      <div id="monthList" class="month-list"></div>
    </div>
  </section>

  <section id="v-roster" style="display:none">
    <div class="card">
      <h4>Plantel</h4>
      <div class="section-note">Listado del plantel (tabla <code>players</code>).</div>
      <div id="rosterGrid" class="grid" style="margin-top:8px"></div>
    </div>
  </section>

  <section id="v-matches" style="display:none">
    <div class="card">
      <h4>Partidos jugados</h4>
      <div class="section-note">Registro de partidos: goles, diferencia y goleadoras/asistencias.</div>
      <div id="matchesList" style="margin-top:12px"></div>
    </div>
  </section>
</div>

<footer style="text-align:center;padding:16px;color:var(--mut);font-size:var(--content-size)">Golden Moms Â· hecho con ðŸ’š lima & azul</footer>

<!-- Modal (igual que antes) -->
<div class="modal-bg" id="modalBg" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true">
    <h3 id="modalTitle">Nuevo evento</h3>
    <!-- ... contenido del modal ... -->
    <!-- (mantÃ©n el mismo modal/JS que tenÃ­as) -->
  </div>
</div>

<script>
/* AquÃ­ mantÃ©n tu JS intacto (conexiÃ³n Supabase, modal handlers, renderDash, renderMonth, etc).
   SÃ³lo ten en cuenta que el ID #birthToday ahora tiene estilos mÃ¡s reducidos.
   Si quieres, puedo pegar el JS completo (lo hice en la versiÃ³n previa) â€” dime si lo necesitas. */
</script>
</body>
</html>
